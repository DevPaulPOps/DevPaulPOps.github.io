<!-- competence.component.html -->
<section class="competences-section">
  <h2 class="section-title">
    <i class="pi pi-star"></i>
    <span>Mes Comp√©tences</span>
  </h2>

  <div class="competences-grid">
    <p-card *ngFor="let domaine of domaines; let i = index"
            styleClass="domain-card"
            [style]="{
              'animation': 'cardEntry 0.6s ease-out forwards',
              'animation-delay': i * 0.2 + 's'
            }">
      <ng-template pTemplate="header">
        <div class="domain-header">
          <i [class]="domaine.icon"></i>
          <h3>{{ domaine.nom }}</h3>
        </div>
      </ng-template>

      <div class="competences-list">
        <div *ngFor="let competence of domaine.competences"
             class="competence-item"
             pRipple>
          <i [class]="competence.icon"></i>
          <span>{{ competence.nom }}</span>
        </div>
      </div>

      <ng-template pTemplate="footer">
        <p-progressBar
          [value]="getDomainProgress(domaine)"
          [showValue]="false"
          [style]="{'height': '4px'}"
          styleClass="custom-progress">
        </p-progressBar>
      </ng-template>
    </p-card>
  </div>

  <!-- Skeleton loading state -->
  <div class="competences-grid" *ngIf="loading">
    <p-card *ngFor="let i of [1,2,3,4]" styleClass="domain-card">
      <p-skeleton height="2rem" styleClass="mb-2"></p-skeleton>
      <p-skeleton width="60%" height="1.5rem" styleClass="mb-2"></p-skeleton>
      <div class="competences-list">
        <p-skeleton *ngFor="let j of [1,2,3]" height="3rem" styleClass="mb-2"></p-skeleton>
      </div>
    </p-card>
  </div>
</section>
